---
displayed_sidebar: docs
---

# json_keys

JSON オブジェクトからトップレベルのキーを JSON 配列として返します。`path` が指定されている場合は、そのパスからトップレベルのキーを返します。

## Syntax

```Haskell
json_keys(json_doc[, path])
```

## Parameters

`json_doc`: 必須。キーを返す対象の JSON ドキュメント。JSON オブジェクトである必要があります。

`path`: オプション。パスは通常 `$` で始まり、`.` をパスの区切りとして使用します。`[]` は配列の添字として使用され、0 から始まります。

## Return value

JSON 配列を返します。

JSON オブジェクトが空の場合、空の配列が返されます。

JSON ドキュメントが JSON オブジェクトでない場合や、パスがドキュメント内の値を特定しない場合は、`NULL` が返されます。

JSON ドキュメントが JSON オブジェクトをネストした配列である場合、`path` パラメータを使用してそのオブジェクトからキーを取得できます。

## Examples

Example 1: 入力された JSON オブジェクトが空のため、空の配列を返します。

```Plain
select json_keys('{}');
+-----------------+
| json_keys('{}') |
+-----------------+
| []              |
+-----------------+
```

Example 2: JSON オブジェクトのキーを返します。

```Plain
select json_keys('{"a": 1, "b": 2, "c": 3}');
+----------------+
| json_keys('1') |
+----------------+
|["a", "b", "c"] |
+----------------+
```

Example 3: 指定されたパスに一致する JSON オブジェクトのキーを返します。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.c') |
+---------------------------------------------------------------------+
| ["d", "e", "f"]                                                     |
+---------------------------------------------------------------------+
```

Example 4: パスが存在しない場合。

```Plain
select json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e');
+---------------------------------------------------------------------+
| json_keys('{"a": 1, "b": 2, "c": {"d": 3, "e": 4, "f": 5}}', '$.e') |
+---------------------------------------------------------------------+
| NULL                                                                |
+---------------------------------------------------------------------+
```

Example 5: JSON ドキュメントが JSON オブジェクトでない場合。

```Plain
select json_keys('[1, 2, {"a": 1, "b": 2}]');
+---------------------------------------+
| json_keys('[1, 2, {"a": 1, "b": 2}]') |
+---------------------------------------+
| NULL                                  |
+---------------------------------------+
```

Example 6: JSON ドキュメントが JSON オブジェクトをネストした配列である場合。パスを指定してそのオブジェクトからキーを取得します。

```Plain
select json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]');
+-----------------------------------------------+
| json_keys('[0, 1, {"a": 1, "b": 2}]', '$[2]') |
+-----------------------------------------------+
| ["a", "b"]                                    |
+-----------------------------------------------+
```

:::tip
すべての JSON 関数と演算子は、ナビゲーションと [overview page](../overview-of-json-functions-and-operators.md) にリストされています。
:::